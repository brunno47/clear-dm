@echo off
chcp 65001 >nul
title ╔═══════════════════════════════════════╗ Fourstatic ╚═══════════════════════════════════════╝
color 0B
cls

echo.
echo.
echo     ╔═══════════════════════════════════════════════════════════════╗
echo     ║                                                               ║
echo     ║          ███████╗███████╗██╗     ███████╗██████╗ ████████╗   ║
echo     ║          ██╔════╝██╔════╝██║     ██╔════╝██╔══██╗╚══██╔══╝   ║
echo     ║          ███████╗█████╗  ██║     █████╗  ██████╔╝   ██║      ║
echo     ║          ╚════██║██╔══╝  ██║     ██╔══╝  ██╔══██╗   ██║      ║
echo     ║          ███████║███████╗███████╗███████╗██║  ██║   ██║      ║
echo     ║          ╚══════╝╚══════╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝      ║
echo     ║                                                               ║
echo     ║              ╔═══════════════════════════════════╗             ║
echo     ║              ║         Fourstatic v1.0              ║             ║
echo     ║              ╚═══════════════════════════════════╝             ║
echo     ║                                                               ║
echo     ╚═══════════════════════════════════════════════════════════════╝
echo.
echo.
echo     ═══════════════════════════════════════════════════════════════
echo     ║                                                              ║
echo     ║  [*] Verificando dependencias...                            ║
echo     ║                                                              ║
echo     ═══════════════════════════════════════════════════════════════
echo.
echo.

if not exist "node_modules\" (
    echo     ═══════════════════════════════════════════════════════════════
    echo     ║                                                              ║
    echo     ║  [!] AVISO: Dependencias nao encontradas!                   ║
    echo     ║                                                              ║
    echo     ║  [*] Executando instalacao automatica...                    ║
    echo     ║                                                              ║
    echo     ═══════════════════════════════════════════════════════════════
    echo.
    echo.
    call npm install
    echo.
    echo.
    echo     ═══════════════════════════════════════════════════════════════
    echo     ║                                                              ║
    echo     ║  [✓] Instalacao concluida!                                   ║
    echo     ║                                                              ║
    echo     ═══════════════════════════════════════════════════════════════
    echo.
    echo.
    timeout /t 2 >nul
    cls
    goto :menu
)

:menu
cls
echo.
echo.
echo     ╔═══════════════════════════════════════════════════════════════╗
echo     ║                                                               ║
echo     ║          ███████╗███████╗██╗     ███████╗██████╗ ████████╗   ║
echo     ║          ██╔════╝██╔════╝██║     ██╔════╝██╔══██╗╚══██╔══╝   ║
echo     ║          ███████╗█████╗  ██║     █████╗  ██████╔╝   ██║      ║
echo     ║          ╚════██║██╔══╝  ██║     ██╔══╝  ██╔══██╗   ██║      ║
echo     ║          ███████║███████╗███████╗███████╗██║  ██║   ██║      ║
echo     ║          ╚══════╝╚══════╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝      ║
echo     ║                                                               ║
echo     ║              ╔═══════════════════════════════════╗             ║
echo     ║              ║         Fourstatic v1.0              ║             ║
echo     ║              ╚═══════════════════════════════════╝             ║
echo     ║                                                               ║
echo     ╚═══════════════════════════════════════════════════════════════╝
echo.
echo.
echo     ═══════════════════════════════════════════════════════════════
echo     ║                                                              ║
echo     ║  [*] Verificando arquivo de configuracao...                  ║
echo     ║                                                              ║
echo     ═══════════════════════════════════════════════════════════════
echo.
echo.

if not exist ".env" (
    echo     ╔═══════════════════════════════════════════════════════════════╗
    echo     ║                                                               ║
    echo     ║  ██████╗ ██████╗ ██████╗ ███████╗                            ║
    echo     ║  ██╔══██╗██╔══██╗██╔══██╗██╔════╝                            ║
    echo     ║  ██║  ██║██████╔╝██████╔╝█████╗                              ║
    echo     ║  ██║  ██║██╔══██╗██╔══██╗██╔══╝                              ║
    echo     ║  ██████╔╝██║  ██║██║  ██║███████╗                            ║
    echo     ║  ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚══════╝                            ║
    echo     ║                                                               ║
    echo     ║          ╔═══════════════════════════════════╗                ║
    echo     ║          ║   ARQUIVO .ENV NAO ENCONTRADO!    ║                ║
    echo     ║          ╚═══════════════════════════════════╝                ║
    echo     ║                                                               ║
    echo     ╚═══════════════════════════════════════════════════════════════╝
    echo.
    echo.
    echo     ═══════════════════════════════════════════════════════════════
    echo     ║                                                              ║
    echo     ║  [!] O arquivo .env nao foi encontrado!                      ║
    echo     ║                                                              ║
    echo     ║  [→] Por favor, crie um arquivo .env com o seguinte:        ║
    echo     ║                                                              ║
    echo     ║      TOKEN=seu_token_aqui                                    ║
    echo     ║                                                              ║
    echo     ║  [→] Voce pode copiar o arquivo .env.example como base      ║
    echo     ║                                                              ║
    echo     ═══════════════════════════════════════════════════════════════
    echo.
    echo.
    pause
    exit /b 1
)

echo     ═══════════════════════════════════════════════════════════════
echo     ║                                                              ║
echo     ║  [✓] Todas as verificacoes concluidas!                      ║
echo     ║                                                              ║
    echo     ║  [*] Iniciando Fourstatic...                                     ║
echo     ║                                                              ║
echo     ═══════════════════════════════════════════════════════════════
echo.
echo.
timeout /t 2 >nul
cls

echo.
echo.
echo     ╔═══════════════════════════════════════════════════════════════╗
echo     ║                                                               ║
echo     ║          ███████╗███████╗██╗     ███████╗██████╗ ████████╗   ║
echo     ║          ██╔════╝██╔════╝██║     ██╔════╝██╔══██╗╚══██╔══╝   ║
echo     ║          ███████╗█████╗  ██║     █████╗  ██████╔╝   ██║      ║
echo     ║          ╚════██║██╔══╝  ██║     ██╔══╝  ██╔══██╗   ██║      ║
echo     ║          ███████║███████╗███████╗███████╗██║  ██║   ██║      ║
echo     ║          ╚══════╝╚══════╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝      ║
echo     ║                                                               ║
echo     ║              ╔═══════════════════════════════════╗             ║
echo     ║              ║         Fourstatic v1.0              ║             ║
echo     ║              ╚═══════════════════════════════════╝             ║
echo     ║                                                               ║
echo     ╚═══════════════════════════════════════════════════════════════╝
echo.
echo.

node index.js

if %errorlevel% neq 0 (
    echo.
    echo.
    echo     ╔═══════════════════════════════════════════════════════════════╗
    echo     ║                                                               ║
    echo     ║  ██████╗ ██████╗ ██████╗ ███████╗                            ║
    echo     ║  ██╔══██╗██╔══██╗██╔══██╗██╔════╝                            ║
    echo     ║  ██║  ██║██████╔╝██████╔╝█████╗                              ║
    echo     ║  ██║  ██║██╔══██╗██╔══██╗██╔══╝                              ║
    echo     ║  ██████╔╝██║  ██║██║  ██║███████╗                            ║
    echo     ║  ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚══════╝                            ║
    echo     ║                                                               ║
    echo     ║          ╔═══════════════════════════════════╗                ║
    echo     ║          ║      ERRO AO EXECUTAR O FOURSTATIC!     ║                ║
    echo     ║          ╚═══════════════════════════════════╝                ║
    echo     ║                                                               ║
    echo     ╚═══════════════════════════════════════════════════════════════╝
    echo.
    echo.
    echo     ═══════════════════════════════════════════════════════════════
    echo     ║                                                              ║
    echo     ║  [✗] Ocorreu um erro ao executar o Fourstatic!                   ║
    echo     ║                                                              ║
    echo     ║  [→] Verifique se o token esta correto no arquivo .env       ║
    echo     ║  [→] Certifique-se de ter Node.js instalado                  ║
    echo     ║                                                              ║
    echo     ═══════════════════════════════════════════════════════════════
    echo.
    echo.
    pause
)

exit
